(this["webpackJsonpfe2610-react"]=this["webpackJsonpfe2610-react"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(9),r=a.n(c),l=(a(15),a(1)),m=a(2),s=a(5),i=a(3),u=a(6);a(16);function d(e){return o.a.createElement("a",{href:"/",className:"thumb-image",onClick:function(t){t.preventDefault(),e.action(e.id)}},o.a.createElement("img",{className:"thumb-image__content",alt:"",src:e.url}))}a(17);function p(e){var t=e.items;return o.a.createElement("ul",{className:"content-list"},t.map((function(t){return o.a.createElement("li",{className:"content-list__item",key:t.id},o.a.createElement(d,{id:t.id,url:t.url,action:e.action}))})))}var h=a(4),f=a(7),g=(a(18),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).closeHandler=function(e){a.contentRef.current&&e.target.closest(".modal__content")!==a.contentRef.current&&a.props.closeHandler&&a.props.closeHandler()},a.renderComment=function(e){var t=e.id,n=e.text,c=e.date;return o.a.createElement("li",{key:t,className:"modal__comment"},o.a.createElement("div",{className:"modal__comment-date"},a.getDateStr(c)),o.a.createElement("div",{className:"modal__comment-text"},n))},a.changeInput=function(e){var t=e.target,n=t.name,o=t.value,c=a.state.formData;a.setState({formData:Object(f.a)({},c,Object(h.a)({},n,o))})},a.submitForm=function(e){e.preventDefault();var t=a.state.formData,n=a.props.id;a.setState({dataSending:!0}),fetch("https://boiling-refuge-66454.herokuapp.com/images/".concat(n,"/comments"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return 204===e.status?(a.setState({dataSending:!1,formData:{},errors:{}}),!1):e.json()})).then((function(e){e&&a.setState({dataSending:!1,errors:e.errors})}))},a.contentRef=o.a.createRef(),a.mounted=!0,a.state={infoLoaded:!1,formData:{},dataSending:!1,errors:{}},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;fetch("https://boiling-refuge-66454.herokuapp.com/images/".concat(t)).then((function(e){return e.json()})).then((function(a){e.mounted&&t===a.id&&e.setState(Object(f.a)({},a,{infoLoaded:!0}))}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"renderLoader",value:function(){var e=this.props.closeHandler;return o.a.createElement("div",{className:"modal",onClick:this.closeHandler},o.a.createElement("div",{className:"modal__content",ref:this.contentRef},o.a.createElement("button",{onClick:e,className:"modal__close","aria-label":"close modal window"},"X"),"Loading ..."))}},{key:"getDateStr",value:function(e){var t=new Date(e),a=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return"".concat(o,".").concat(n,".").concat(a)}},{key:"render",value:function(){var e=this.props.closeHandler,t=this.state,a=t.infoLoaded,n=t.url,c=t.comments,r=t.formData,l=t.dataSending,m=t.errors,s=r.name,i=void 0===s?"":s,u=r.comment,d=void 0===u?"":u;return a?o.a.createElement("div",{className:"modal",onClick:this.closeHandler},o.a.createElement("div",{className:"modal__content",ref:this.contentRef},o.a.createElement("button",{onClick:e,className:"modal__close","aria-label":"close modal window"},"X"),o.a.createElement("div",{className:"modal__content-wrapper"},o.a.createElement("div",{className:"modal__content-column"},o.a.createElement("img",{className:"modal__image",src:n,alt:""})),o.a.createElement("ul",{className:"modal__content-column"},c&&c.length>0&&c.map(this.renderComment))),o.a.createElement("form",{className:"modal__add-comment",onSubmit:this.submitForm},o.a.createElement("label",{className:"modal__input-wrapper"},o.a.createElement("input",{disabled:l,className:"modal__input",type:"text",name:"name",value:i,onChange:this.changeInput}),o.a.createElement("span",{className:"modal__input-label"},"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"),m.name&&o.a.createElement("div",null,m.name)),o.a.createElement("label",{className:"modal__input-wrapper"},o.a.createElement("input",{disabled:l,className:"modal__input",type:"text",name:"comment",value:d,onChange:this.changeInput}),o.a.createElement("span",{className:"modal__input-label"},"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),m.comment&&o.a.createElement("div",null,m.comment)),o.a.createElement("button",{className:"modal__submit",type:"submit",disabled:l},"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")))):this.renderLoader()}}]),t}(o.a.PureComponent)),_=(a(19),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).closeModal=function(){a.setState({showImage:null})},a.showImage=function(e){a.setState({showImage:e})},a.state={currentDate:new Date,images:null,showImage:null},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://boiling-refuge-66454.herokuapp.com/images").then((function(e){return e.json()})).then((function(t){e.setState({images:t})}))}},{key:"render",value:function(){var e=this.state,t=e.currentDate,a=e.images,n=e.showImage;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:"app-header"},"Test App"),o.a.createElement("main",{className:"app-content"},a?o.a.createElement(p,{items:a,action:this.showImage}):"Loading..."),n&&o.a.createElement(g,{id:n,closeHandler:this.closeModal}),o.a.createElement("footer",{className:"app-footer"},"\xa9 2018 - ",t.getFullYear()))}}]),t}(o.a.PureComponent));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.4d5832ec.chunk.js.map